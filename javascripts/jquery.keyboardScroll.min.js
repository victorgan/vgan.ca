(function(a){a.fn.keyboardScroll=function(b){function e(b,c){a("html,body").animate({scrollTop:b},c)}function f(b,c){var d=a(window).height()/2-b.height()/2;var f=b.offset().top-d;e(f,c)}function g(){var b=a(window).scrollTop();var c=b+a(window).height();var d=a(this).offset().top;var e=d+a(this).height();var f=Math.floor((b+c)/2-a(this).height()/2);var g=Math.ceil((b+c)/2+a(this).height()/2);if(e>=f&&d<g)return true;else return false}var c=this;var d={downKeyCode:74,upKeyCode:75,scrollDuration:100};a.extend(d,b);var h=d.downKeyCode;var i=d.upKeyCode;a(document).keydown(function(b){var e=c.filter(g).first();if((b.keyCode===h||b.keyCode===i)&&e.length){var j=a(window).scrollTop();var k=j+a(window).height();var l=e.offset().top;var m=Math.floor((j+k)/2-e.height()/2);var n;var o=5;if(b.keyCode===h){if(l>m+o){n=e}else if(!e.is(c.last())){n=e.next(c)}}else if(b.keyCode===i){if(l<m-o){n=e}else if(!e.is(c.first())){n=e.prev(c)}}if(n.length){f(n,d.scrollDuration)}}else if(b.keyCode===h&&c.first().length){f(c.first(),d.scrollDuration)}else if(b.keyCode===i&&c.last().length){f(c.last(),d.scrollDuration)}})}})(jQuery)
